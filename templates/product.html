{% include 'adminheader.html' %}
<link rel="stylesheet" href="/static/css/product.css" />
<link rel="stylesheet" href="/static/css/css/bootstrap.min.css" />

{% if data['updateProduct'] %}
<h1>Update Section</h1>
<div style="display: flex; width: 100%; gap: 50px">
  <div>
    <form action="" method="post" enctype="multipart/form-data">
      <div class="container">
        <div>
          <label for="">Product Name</label>
          <input
            type="text"
            name="p_name"
            value="{{data['updateProduct'][0]['product_name']}}"
          />
        </div>

        <div>
          <label for="">Product Image</label>
          <input
            type="file"
            name="p_image"
            value="{{data['updateProduct'][0]['product_image']}}"
          />
        </div>

        <div>
          <label for="">Product Quantity</label>
          <input
            type="text"
            name="p_quantity"
            id=""
            value="{{data['updateProduct'][0]['product_quantity']}}"
          />
        </div>

        <div>
          <label for="">Product Price</label>
          <input
            type="text"
            name="p_price"
            value="{{data['updateProduct'][0]['product_price']}}"
          />
        </div>
        <div>
          <input type="submit" name="update" />
        </div>
      </div>
    </form>
  </div>

  {% else %}
  <h1>Manage Product</h1>
  <div style="display: flex; width: 100%; gap: 50px">
    <div>
      <form action="" method="post" enctype="multipart/form-data">
        <div class="container">
          <div>
            <label for="">Product Name</label>
            <input type="text" name="p_name" />
          </div>

          <div>
            <label for="">Product Image</label>
            <input type="file" name="p_image" />
          </div>

          <div>
            <label for="">Product Quantity</label>
            <input type="text" name="p_quantity" id="" />
          </div>

          <div>
            <label for="">Product Price</label>
            <input type="text" name="p_price" />
          </div>

          <div>
            <input type="submit" name="submit" value="Submit"/>
          </div>
        </div>
      </form>
    </div>
    {% endif %}
    <div>
      <h3>View Products</h3>

      <table class="table table-striped">
        <tr>
          <th>Product</th>
          <th>Image</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Update</th>
          <th>Delete</th>
        </tr>

        {% for row in data['res'] %}
        <tr>
          <td>{{ row['product_name'] }}</td>
          <td>
            <img
              src="/{{ row['product_image'] }}"
              width="100"
              height="100"
              alt=""
            />
          </td>
          <td>{{ row['product_quantity'] }}</td>
          <td>{{ row['product_price'] }}</td>
          <td>
            <a href="?action=update&pid={{ row['product_id'] }}">Update</a>
          </td>
          <td>
            <a
              onclick="return confirm('are you sure!')"
              href="?action=delete&pid={{ row['product_id'] }}"
              >Delete</a
            >
          </td>
        </tr>
        {% endfor %}
      </table>
    </div>
  </div>

  {% include 'footer.html' %}
</div>
